<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Stromadapter – Konfigurator</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#ffffff; --text:#111827; --muted:#6b7280; --border:#e5e7eb; --panel:#f9fafb; --focus:#11182733; --space:16px; --space-lg:24px; }
    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{ margin:0; font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; color:var(--text); background:var(--bg); }
    .container{ max-width:1100px; margin:0 auto; padding:24px; }
    header{ position:sticky; top:0; background:rgba(255,255,255,.85); backdrop-filter:saturate(150%) blur(8px); border-bottom:1px solid var(--border); z-index:10; }
    .nav{ display:flex; align-items:center; justify-content:space-between; padding:12px 24px; }
    .brand{ display:flex; align-items:center; gap:10px; }
    .badge{ font-size:12px; padding:2px 8px; border:1px solid var(--border); border-radius:999px; color:var(--muted); }

    .button{ appearance:none; border:1px solid var(--border); background:#fff; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; white-space:nowrap; font-size:14px; }
    .button.primary{ background:#111827; color:#fff; border-color:#111827; }
    .button:focus{ outline:none; box-shadow:0 0 0 4px var(--focus); }

    .hero{ display:grid; grid-template-columns:1.2fr 1fr; gap:32px; align-items:center; padding:32px 24px; border-bottom:1px solid var(--border); }
    @media (max-width: 900px){ .hero{ grid-template-columns:1fr; } }
    .hero h1{ font-size:clamp(28px,3.6vw,48px); line-height:1.05; margin:8px 0 12px; }
    .sub{ color:var(--muted); max-width:60ch; }

    .panel{ background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:16px; }
    .grid{ display:grid; gap:var(--space); }

    .preview-card{ background:#fff; border:1px solid var(--border); border-radius:18px; padding:16px; display:flex; gap:16px; }
    .preview-visual{ flex:0 0 360px; max-width:100%; aspect-ratio:4/3; border:1px dashed var(--border); border-radius:14px; display:flex; align-items:center; justify-content:center; background:linear-gradient(180deg,#fff,#fafafa); overflow:hidden; }
    .preview-visual img{ max-width:100%; max-height:100%; object-fit:contain; }
    .preview-info{ flex:1; display:flex; flex-direction:column; gap:8px; }
    .muted{ color:var(--muted); }
    .pill{ display:inline-flex; align-items:center; gap:8px; padding:8px 10px; background:#fff; border:1px solid var(--border); border-radius:999px; font-size:12px; color:var(--muted); }

    /* ----- Konfigurator Layout Politur ----- */
    .cfg-block{ margin-top:var(--space-lg); }
    .cfg-label{ display:block; font-size:14px; font-weight:700; margin-bottom:10px; }

    /* Eingangsseite: fließend, ohne "Löcher" – responsive Auto-Fit */
    #inputPicker{ display:grid; gap:12px; grid-template-columns:repeat(auto-fit, minmax(260px, 1fr)); }

    /* Ausgangsseite: wie gehabt (breite, längenangepasste Karten) */
    #outputPicker{ display:grid; gap:12px; grid-auto-flow:row; grid-template-columns:repeat(auto-fit, minmax(260px, max-content)); justify-content:start; }

    .pick-card{ position:relative; border:1px solid var(--border); background:#fff; border-radius:14px; padding:12px; cursor:pointer; display:flex; gap:12px; align-items:center; transition: box-shadow .15s, border-color .15s; width:100%; }
    #outputPicker .pick-card{ width:max-content; }
    .pick-card:hover{ box-shadow:0 2px 10px rgba(17,24,39,.06); }
    .pick-card.selected{ border-color:#111827; box-shadow:0 0 0 2px #111827 inset; }
    .pick-card img{ width:72px; height:72px; object-fit:contain; border-radius:10px; border:1px solid var(--border); background:#f5f5f5; }
    .pick-title{ font-weight:600; }
    .small{ font-size:12px; color:var(--muted); }
    .pick-right{ margin-left:auto; display:flex; align-items:center; gap:6px; }

    /* Anzahl-Ausgänge: Buttons nebeneinander, ohne Lückenumbruch */
    .count-row{ display:flex; gap:8px; }
    .count-row .button{ flex:1 0 0; }

    .io-strip{ display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
    .io-item{ display:flex; align-items:center; gap:8px; }
    .io-item img{ width:40px; height:40px; object-fit:contain; border-radius:8px; border:1px solid var(--border); background:#f5f5f5; }

    .error{ color:#b91c1c; font-weight:600; }

    /* 2/3 : 1/3 Spaltensetup mit großzügigerem Abstand */
    .layout-outputs{ display:grid; grid-template-columns:2fr 1fr; gap:var(--space-lg); }
    @media (max-width:900px){ .layout-outputs{ grid-template-columns:1fr; } }
  </style>
</head>
<body>
  <header>
    <div class="nav container">
      <div class="brand">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none" aria-hidden="true"><rect x="3" y="7" width="18" height="10" rx="2" ry="2" stroke="#111827"/><circle cx="7" cy="12" r="1.5" fill="#111827"/><circle cx="17" cy="12" r="1.5" fill="#111827"/></svg>
        <strong>Stromadapter</strong>
        <span class="badge">made in germany</span>
      </div>
      <div>
        <button class="button" onclick="
  const el=document.getElementById('konfigurator');
  window.scrollTo({top: el.getBoundingClientRect().top + window.scrollY - 30, behavior:'smooth'});
">
  Konfigurator
</button>
        <button class="button primary" onclick="document.getElementById('kontakt').scrollIntoView({behavior:'smooth'})">Anfrage</button>
      </div>
    </div>
  </header>

  <section class="hero container">
    <div>
      <h1>Konfiguriere deinen Adapter.<br>egal ob Strom, Signal oder Daten.</h1>
      <p class="sub">
        Kategorie<b> Power</b> aktuell verfügbar. Sound-/Daten-Kategorien (SpeakON, XLR, EtherCON) sowie Schuko/IEC sind derzeit ausgeblendet.
        Eingangsseite ist immer <b>1×</b>. Ausgangsseite: <b>1× oder 2×</b>. <br> 3D-Gedrucktes Gehäuse, Seetronic Stecker 100% kompatibel mit Neutrik PowerCon und PowerCon TR1.
      </p>
      <div style="display:flex; gap:10px; margin-top:16px;">
        <button class="button primary" onclick="
  const el=document.getElementById('konfigurator');
  window.scrollTo({top: el.getBoundingClientRect().top + window.scrollY - 30, behavior:'smooth'});
">
  Konfigurator öffnen
</button>
        <button class="button" onclick="document.getElementById('kontakt').scrollIntoView({behavior:'smooth'})">Anfrage</button>
      </div>
    </div>
    <div class="panel">
      <div class="preview-card">
        <div class="preview-visual"><img id="heroPreview" alt="Adapter Vorschau"></div>
        <div class="preview-info">
          <div style="display:flex; gap:8px; flex-wrap:wrap;">
            <span class="pill">Robustes Gehäuse</span>
            <span class="pill">Wartungsfreundlich</span>
            <span class="pill">Individuell konfigurierbar</span>
          </div>
          <h3 style="margin:8px 0 0">Vorschau</h3>
          <div class="io-strip">
            <div class="io-item"><img id="heroInImg" alt="Eingang"><span class="small" id="heroInTxt">—</span></div>
            <span class="small">→</span>
            <div class="io-item" id="heroOutWrap"><img id="heroOutImg" alt="Ausgang"><span class="small" id="heroOutTxt">—</span></div>
            <span class="small" id="heroOutCount">×1</span>
          </div>
          <p class="muted" style="margin:1">25€ pro Stück</p>
        </div>
      </div>
    </div>
  </section>

  <section id="konfigurator" class="container" style="margin-top:24px;">
    <h2>Konfigurator</h2>
    <p class="muted">Wähle den Eingang (immer 1×) und den Ausgang (1 oder 2×). Nur Power-Typen: <b>TR1</b> & <b>PowerCON</b>.</p>

    <!-- Eingangsseite -->
    <div class="panel cfg-block">
      <label class="cfg-label">Eingangsseite</label>
      <div id="inputPicker"></div>
    </div>

    <!-- Ausgangsseite + Anzahl -->
    <div class="layout-outputs cfg-block">
      <div class="panel">
        <label class="cfg-label">Ausgangsseite</label>
        <div id="outputPicker"></div>
      </div>
      <div class="panel">
        <label class="cfg-label" for="outCount">Anzahl Ausgänge</label>
        <div class="count-row">
          <button class="button" id="btnOut1">1</button>
          <button class="button" id="btnOut2">2</button>
        </div>
        <div style="height:12px;"></div>

      </div>
    </div>

    <p id="error" class="error" style="display:none; margin-top:10px;">Für diese Auswahl gibt es noch keine freigegebene Kombination.</p>

    <!-- Ergebnis -->
    <div id="result" class="panel cfg-block">
      <div class="preview-card">
        <div class="preview-visual"><img id="resultPreview" alt="Konfigurierte Vorschau"></div>
        <div class="preview-info">
          <h3 id="sku">ADP-—</h3>
          <p id="desc" class="muted">—</p>
          <div style="display:flex; gap:8px; flex-wrap:wrap; margin:8px 0;" id="chips"></div>
          <div class="io-strip" style="margin-top:6px;">
            <div class="io-item"><img id="resInImg" alt="Eingang"><span class="small" id="resInTxt">—</span></div>
            <span class="small">→</span>
            <div class="io-item" id="resOutWrap"><img id="resOutImg" alt="Ausgang"><span class="small" id="resOutTxt">—</span></div>
            <span class="small" id="resOutCount">×1</span>
          </div>
          <div style="margin-top:auto; display:flex; justify-content:flex-end;">
            
            <button class="button" onclick="downloadDatasheet()">Produktdatenblatt herunterladen</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <footer id="kontakt" class="container">
    <div class="grid" style="grid-template-columns:1fr 1fr; gap:var(--space-lg);">
      <div>
        <strong>Kontakt</strong>
        <p class="muted">Schreibe uns deine Anforderungen oder lade eine Zeichnung/Skizze hoch. </p>
      </div>
      <form class="panel" method="post" action="mailto:you@example.com?subject=Anfrage%20Stromadapter" enctype="text/plain">
        <label for="name">Name</label>
        <input id="name" name="Name" placeholder="Max Mustermann" required>
        <div style="height:8px"></div>
        <label for="email">E-Mail</label>
        <input id="email" name="E-Mail" type="email" placeholder="max@example.com" required>
        <div style="height:8px"></div>
        <label for="msg">Nachricht</label>
        <textarea id="msg" name="Nachricht" rows="4" placeholder="Kurzbeschreibung deiner Anwendung" style="width:100%; padding:10px 12px; border:1px solid var(--border); border-radius:12px;"></textarea>
        <div style="height:12px"></div>
        <button class="button primary" type="submit">Anfrage senden</button>
      </form>
    </div>
    <p style="margin-top:16px;" class="muted">© <span id="year"></span> Stromadapter – Alle Rechte vorbehalten.</p>
  </footer>

  <script>
    // ==========================
    // 1) Stammdaten (Power only)
    // ==========================
    const HERO_FALLBACK = "img/hero.png"; // generisches Fallback

    const INPUTS = [
      { code:"sac3px",  label:"PowerTwist TR1 Kombibuchse", img:"img/sac3px.png"  },
      { code:"sac3mpx", label:"PowerTwist TR1 male",        img:"img/sac3mpx.png" },
      { code:"sac3mpa", label:"PowerTwist male",            img:"img/sac3mpa.png" },
    ];

    const OUTPUTS = [
      { code:"sac3fpx", label:"PowerTwist TR1 female", img:"img/sac3fpx.png" },
      { code:"sac3mpb", label:"PowerTwist female",     img:"img/sac3mpb.png"  },
    ];

    const VALID_COMBOS = [];
    INPUTS.forEach(i => { OUTPUTS.forEach(o => { [1,2].forEach(n => VALID_COMBOS.push({in:i.code, out:o.code, out_count:n})); }); });

    // ==========================
    // 2) Helpers
    // ==========================
    function $(id){ return document.getElementById(id); }
    function byCode(list, code){ return list.find(x=>x.code===code); }
    function isValid(inCode, outCode, outCount){ return VALID_COMBOS.some(c=>c.in===inCode && c.out===outCode && c.out_count===Number(outCount)); }
    function sku(inCode, outCode, outCount){ return `ADP-${inCode.toUpperCase()}1-${outCode.toUpperCase()}${outCount}`; }
    function desc(inCode, outCode, outCount){ const i = byCode(INPUTS,inCode), o = byCode(OUTPUTS,outCode); return `1 Eingang ${i?.label || inCode} → ${outCount} Ausgang${outCount>1?'e':''} ${o?.label || outCode}`; }
    function chip(text){ const s=document.createElement('span'); s.className='pill'; s.textContent=text; return s; }

    // Platzhalter-SVG (ohne Options-Elemente)
    function svgPlaceholder(inCode, outCode, outCount){
      const W=640, H=480, R=16, stroke='#e5e7eb', shadow='#f3f4f6', muted='#6b7280';
      const inPositions=[H/2], outPositions = outCount===1 ? [H/2] : [H/2-70, H/2+70];
      const inLabel = (byCode(INPUTS,inCode)?.label)||inCode, outLabel=(byCode(OUTPUTS,outCode)?.label)||outCode;
      const port = (x,y,label)=>`<g><circle cx='${x}' cy='${y}' r='22' fill='#111827' opacity='.08'/><circle cx='${x}' cy='${y}' r='12' fill='#111827'/><text x='${x}' y='${y+4}' text-anchor='middle' font-size='10' fill='#fff'>${label}</text></g>`;
      return "data:image/svg+xml;utf8,"+
        `<svg xmlns='http://www.w3.org/2000/svg' width='${W}' height='${H}' viewBox='0 0 ${W} ${H}'>`+
        `<defs><filter id='s' x='-50%' y='-50%' width='200%' height='200%'><feDropShadow dx='0' dy='4' stdDeviation='8' flood-color='#f3f4f6'/></filter></defs>`+
        `<rect x='80' y='80' width='480' height='320' rx='${R}' ry='${R}' fill='#fff' stroke='${stroke}' filter='url(#s)'/>`+
        `<text x='320' y='115' text-anchor='middle' font-size='18' fill='${muted}'>Durchgangsadapter</text>`+
        `<text x='320' y='140' text-anchor='middle' font-size='12' fill='${muted}'>${inLabel} → ${outLabel}</text>`+
        `${inPositions.map(y=>port(120,y,'IN')).join('')}`+
        `${outPositions.map(y=>port(520,y,'OUT')).join('')}`+
        `<text x='320' y='340' text-anchor='middle' font-size='12' fill='${muted}'>Platzhalter-SVG</text>`+
        `</svg>`;
    }

    function setImg(el, primary, secondary, fallbackSvg){
      el.onerror = null; el.src = primary;
      el.onerror = () => { if (secondary){ el.onerror=null; el.src=secondary; el.onerror=()=>{ el.src=fallbackSvg; }; } else { el.src=fallbackSvg; } };
    }

    // Kartenbreite im Output-Picker auf längste Karte angleichen
    function equalizeOutputCardWidths(){
      const cards = Array.from(document.querySelectorAll('#outputPicker .pick-card'));
      cards.forEach(c=>c.style.width='max-content');
      const max = Math.min(
        Math.max(...cards.map(c=>c.offsetWidth)),
        document.getElementById('outputPicker').clientWidth
      );
      cards.forEach(c=>c.style.width = max + 'px');
    }

    // Bild-Duplikat bei 2 Ausgängen in den kleinen Anzeigen (Hero & Result)
    function renderSmallOutImages(imgUrl, fallbackSvg){
      const wrapIds = ['heroOutWrap','resOutWrap'];
      wrapIds.forEach(id=>{
        const wrap = document.getElementById(id);
        if(!wrap) return;
        wrap.innerHTML = '';
        const make = ()=>{ const im=document.createElement('img'); im.alt='Ausgang'; setImg(im, imgUrl, null, fallbackSvg); return im; };
        wrap.appendChild(make());
        if(state.outCount===2) wrap.appendChild(make());
        const span = document.createElement('span'); span.className='small'; span.id = (id==='heroOutWrap'?'heroOutTxt':'resOutTxt');
        wrap.appendChild(span);
      });
    }

    // ==========================
    // 3) UI – Picker bauen
    // ==========================
    const state = { in: INPUTS[0].code, out: OUTPUTS[0].code, outCount: 1 };

    function buildPicker(targetEl, items, group, selectedCode){
      targetEl.innerHTML = "";
      items.forEach(item=>{
        const card = document.createElement('label');
        card.className = 'pick-card'+(item.code===selectedCode?' selected':'');
        card.innerHTML = `
          <input type="radio" name="${group}" value="${item.code}" style="position:absolute; opacity:0; pointer-events:none;">
          <img src="${item.img}" alt="${item.label}" onerror="this.src='${svgPlaceholder('sac3px','sac3fpx',1)}'">
          <div>
            <div class="pick-title">${item.label}</div>
            <div class="small">${item.code}</div>
          </div>
          <div class="pick-right">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M9 12l2 2 4-4" stroke="#111827" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
          </div>`;
        card.addEventListener('click', ()=>{
          document.querySelectorAll(`#${group==='in'?'inputPicker':'outputPicker'} .pick-card`).forEach(el=>el.classList.remove('selected'));
          card.classList.add('selected');
          if (group==='in'){ state.in = item.code; } else { state.out = item.code; }
          updateResult();
          if(group==='out') equalizeOutputCardWidths();
        });
        targetEl.appendChild(card);
      });
    }

    // ==========================
    // 4) Ergebnis + Aktionen
    // ==========================
    function updateResult(){
      const valid = isValid(state.in, state.out, state.outCount);
      document.getElementById('error').style.display = valid ? 'none' : 'block';

      const i = byCode(INPUTS,state.in), o = byCode(OUTPUTS,state.out);
      const skuTxt = sku(state.in, state.out, state.outCount);
      const descTxt = desc(state.in, state.out, state.outCount);

      document.getElementById('sku').textContent  = valid ? skuTxt : 'ADP—';
      document.getElementById('desc').textContent = valid ? descTxt : 'Bitte gültige Kombination wählen.';

      // Chips (nur Ein-/Ausgang)
      const chips = document.getElementById('chips'); chips.innerHTML='';
      chips.append(chip(`1× ${i.label} IN`));
      chips.append(chip(`${state.outCount}× ${o.label} OUT`));

      // Gehäuse-/Hero-Vorschau mit dynamischem PNG → hero.png → SVG
      const fallbackSvg = svgPlaceholder(state.in, state.out, state.outCount);
      const devicePng = `img/${skuTxt}.png`;
      setImg(document.getElementById('heroPreview'), devicePng, HERO_FALLBACK, fallbackSvg);
      setImg(document.getElementById('resultPreview'), devicePng, HERO_FALLBACK, fallbackSvg);

      // Steckerseitenbilder
      const inImg = i.img, outImg = o.img;
      setImg(document.getElementById('heroInImg'), inImg, null, fallbackSvg);
      renderSmallOutImages(outImg, fallbackSvg);
      setImg(document.getElementById('resInImg'), inImg, null, fallbackSvg);

      document.getElementById('heroInTxt').textContent = i.label;
      document.getElementById('heroOutTxt').textContent = o.label;
      document.getElementById('heroOutCount').textContent = `×${state.outCount}`;
      document.getElementById('resInTxt').textContent = i.label;
      document.getElementById('resOutTxt').textContent = o.label;
      document.getElementById('resOutCount').textContent = `×${state.outCount}`;
    }

    function downloadDatasheet(){
      const skuTxt = sku(state.in, state.out, state.outCount);
      const pdfUrl = `datasheet/${skuTxt}.pdf`;
      const a = document.createElement('a');
      a.href = pdfUrl; a.download = `${skuTxt}.pdf`;
      document.body.appendChild(a); a.click(); a.remove();
    }

    // ==========================
    // 5) Events / Init
    // ==========================
    document.getElementById('year').textContent = new Date().getFullYear();

    // Buttons OutCount
    document.getElementById('btnOut1').addEventListener('click', (e)=>{ e.preventDefault(); state.outCount=1; updateResult(); document.getElementById('btnOut1').classList.add('primary'); document.getElementById('btnOut2').classList.remove('primary'); });
    document.getElementById('btnOut2').addEventListener('click', (e)=>{ e.preventDefault(); state.outCount=2; updateResult(); document.getElementById('btnOut2').classList.add('primary'); document.getElementById('btnOut1').classList.remove('primary'); });

    // Picker initialisieren
    buildPicker(document.getElementById('inputPicker'), INPUTS, 'in', state.in);
    buildPicker(document.getElementById('outputPicker'), OUTPUTS, 'out', state.out);

    // Startzustand
    document.getElementById('btnOut1').classList.add('primary');
    updateResult();
    equalizeOutputCardWidths();
    window.addEventListener('resize', equalizeOutputCardWidths);
  </script>
</body>
</html>
